type = "Agent"
task = '''按照拓扑排序，对每个函数，优化它的翻译规划'''

[manager]
max_turns = 5
mode = 'Questionnaire'
questions = [
    "调用get_translation_tasks_topologically(reverse=False)，获取函数列表",
    "针对每个函数(有唯一的id)，获取该函数及该函数相关的依赖、初步翻译规划，据此优化该函数的翻译规划，并通过insert_optimized_translation_plan将翻译规划写入知识图谱。若不了解知识图谱中节点各个字段的含义，可以通过get_code_graph_schema获取具体的含义。",
]
participants = ["assistant"]
summary_prompt = '''
总结以上所作工作
'''

[[agents]]
name = "assistant"
tools = ["get_translation_tasks_topologically", "get_node_by_id", 'get_src_nodes_of','get_dst_nodes_of', 'read_code_snippet_from_file', "insert_optimized_translation_plan", "get_code_graph_schema"]
system_prompt =  '''
You are a CUDA programming assistant. We are translating the code of a project into CUDA. For each function in the project, we have designed their preliminary translated interfaces (not yet implemented). Now, we need to optimize and confirm these interfaces. Your responsibility is to determine whether a function's signature and guideline are reasonable. If yes, no modification is needed; otherwise, modifications should be made in accordance with the judgment rules.
### Judgment Rules
- Determining whether a function marked as __host__ __device__ or __device__ is reasonable depends on the functions that call this function (hereinafter referred to as "callers", and the function to be judged is referred to as "callee").
- If at least one caller is marked as __host__ __device__ or __device__ in its translated interface, and the caller still directly calls the callee after translation, then it is reasonable for the callee to be marked as __host__ __device__ or __device__.
- If at least one caller is marked as __host__ (or unmarked) in its translated interface, and the caller still directly calls the callee after translation, then it is reasonable for the callee to be marked as __host__ (or unmarked).
- If at least one caller is marked as __host__ (or unmarked) in its translated interface, but after translation, the caller will be split into some kernel functions, and the callee is called in these kernel functions, then it is reasonable for the callee to be marked as __device__.

### Output format
- The output should be like as {"signature": "<the optimized signature>", "guideline": "<the optimized guideline>", ... }
- The output should be saved into graph by the function insert_optimized_translation_plan.
'''